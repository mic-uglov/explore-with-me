FROM amazoncorretto:11

ARG EWM_STATS_SERVER_URL=http://localhost:9090
#ARG SPRING_DATASOURCE_URL=jdbc:h2:file:./db/ewm
ARG SPRING_DATASOURCE_URL=jdbc:postgresql://ewm-db:5432/ewm
ARG SPRING_DATASOURCE_USERNAME=postgres
ARG SPRING_DATASOURCE_PASSWORD=postgres

ENV EWM_STATS_SERVER_URL=$EWM_STATS_SERVER_URL
ENV SPRING_DATASOURCE_URL=$SPRING_DATASOURCE_URL
ENV SPRING_DATASOURCE_USERNAME=$SPRING_DATASOURCE_USERNAME
ENV SPRING_DATASOURCE_PASSWORD=$SPRING_DATASOURCE_PASSWORD

COPY target/*.jar app.jar

ENTRYPOINT ["java", "-jar", "app.jar"]